#! /usr/env bash

# swap ctrl and caps on linux
function swapctrl() {
    gsettings set org.gnome.desktop.input-sources xkb-options "['ctrl:swapcaps']"
    echo "swapped ctrl with caps"
}

# mk and cd
function mknd() {
    mkdir $1
    cd $_
}

# cd and launch tmux
function stmux() {
    cd $1
    tmux
}

# delete old kernel headers
function headers() {
    dpkg -l 'linux-*' | sed '/^i i/!d;/'"$(uname -r |
    sed "s/\(.*\)-\([^0-9]\+\)/\1/")"'/d;s/^[^ ]* [^ ]* \([^ ]*\).*/\1/;/[0-9]/!d' |
    xargs sudo apt-get -y purge
    echo "Purged!"
}

# open an Ebook in a new running tmux session
function openbook() {
    echo 'opening book' $1;
    cd ~/Documents/Ebooks;
    xdg-open $1;
}

# launch a project folder in ~/Development
function project() {
    cd ~/Development/$1
    vim
}

# launch chrome from OSX terminal
function chrome() {
    _OS="$(uname)"
    if [ $_OS="Darwin" ]; then
        open -a "/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome"
    fi
}

# build with r.js optimizer quietly unless error
function ro() {
    r.js -o $1 logLevel=3
}

# unmount and remount FUSE sshfs
function umntbox () {
    cd ~;
    umount ~/sandbox;
    sshfs jared.fowler.test.abcmouse.com:/home/jared.fowler ~/sandbox -oauto_cache,reconnect,defer_permissions,negative_vncache,noappledouble,volname=Sandbox
    cd ~/sandbox/sites;
}

# clean git branches
function chop_branch () {
    b=$1
    git push origin $b --delete;
    git br -D $b;
}
# captain's log
function logbook() {
    vim ~/logbook/`date +%Y-%m-%d`.md
}
